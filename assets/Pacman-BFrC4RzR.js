import{c as Q,r as s,j as n,B as K,L as fe}from"./index-ZD6iM0mj.js";import{u as de}from"./use-page-title-BK4awKjc.js";import{H as ue}from"./heart-ASGQm8iZ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=Q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=Q("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=Q("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),i=20,j=19,O=21,_=.1,W=.07,he=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],[0,2,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,2,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,1,0],[0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,0],[0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0],[3,3,3,0,1,0,1,1,1,1,1,1,1,0,1,0,3,3,3],[0,0,0,0,1,0,1,0,0,3,0,0,1,0,1,0,0,0,0],[1,1,1,1,1,1,1,0,3,3,3,0,1,1,1,1,1,1,1],[0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0],[3,3,3,0,1,0,1,1,1,1,1,1,1,0,1,0,3,3,3],[0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0],[0,2,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,2,0],[0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0],[0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,0],[0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],U={x:9,y:8},J={x:9,y:7},Me=()=>{de("Pac-Man | LSE Studio");const $=s.useRef(null),[w,Z]=s.useState("idle"),[N,C]=s.useState(0),[le,ee]=s.useState(3),[V,oe]=s.useState(()=>{const e=localStorage.getItem("pacman-highscore");return e?parseInt(e):0}),v=s.useRef([]),D=s.useRef({x:9,y:15,direction:"right"}),S=s.useRef("right"),P=s.useRef([]),H=s.useRef(!1),L=s.useRef(null),G=s.useRef(null),E=s.useRef(0),X=s.useRef(3),I=s.useRef(0),T=s.useCallback((e,r,o=!1)=>{var u;if(r<0||r>=O)return!1;if(e<0||e>=j)return!0;const f=(u=v.current[Math.floor(r)])==null?void 0:u[Math.floor(e)];return f===0?!1:f===3||f===1||f===2?!0:o},[]),A=s.useCallback((e,r,o,f=!1)=>{const u=o==="left"?Math.floor(e)-1:o==="right"?Math.floor(e)+1:Math.floor(e),M=o==="up"?Math.floor(r)-1:o==="down"?Math.floor(r)+1:Math.floor(r);return T(u,M,f)},[T]),Y=s.useCallback((e,r)=>Math.abs(e-Math.round(e))<.12&&Math.abs(r-Math.round(r))<.12,[]),te=e=>{switch(e){case"up":return"down";case"down":return"up";case"left":return"right";case"right":return"left"}},B=s.useCallback(()=>{v.current=he.map(e=>[...e]),D.current={x:9,y:15,direction:"right"},S.current="right",H.current=!1,E.current=0,X.current=3,I.current=0,P.current=[{x:9,y:9,direction:"up",color:"#ff0000",isScared:!1,mode:"leaving",releaseTime:0,scatterTarget:{x:17,y:1},homeX:9,homeY:9},{x:9,y:9,direction:"up",color:"#ffb8ff",isScared:!1,mode:"inHouse",releaseTime:120,scatterTarget:{x:1,y:1},homeX:8,homeY:9},{x:9,y:9,direction:"up",color:"#00ffff",isScared:!1,mode:"inHouse",releaseTime:240,scatterTarget:{x:17,y:19},homeX:10,homeY:9},{x:9,y:9,direction:"up",color:"#ffb852",isScared:!1,mode:"inHouse",releaseTime:360,scatterTarget:{x:1,y:19},homeX:9,homeY:10}],C(0),ee(3),Z("playing")},[]),re=s.useCallback(()=>{D.current={x:9,y:15,direction:"right"},S.current="right",I.current=0,P.current.forEach((e,r)=>{e.x=9,e.y=9,e.direction="up",e.isScared=!1,e.mode=r===0?"leaving":"inHouse",e.releaseTime=r*120})},[]),ae=s.useCallback(e=>{e.y<=8.5?e.direction="down":e.y>=9.5&&(e.direction="up"),e.direction==="up"?e.y-=.05:e.y+=.05,I.current>=e.releaseTime&&(e.mode="leaving",e.x=9)},[]),ne=s.useCallback(e=>{const r=W;if(Math.abs(e.x-U.x)>.1){e.x<U.x?(e.x+=r,e.direction="right"):(e.x-=r,e.direction="left");return}e.x=U.x,e.y>J.y?(e.y-=r,e.direction="up"):(e.x=J.x,e.y=J.y,e.mode="active",e.direction="left")},[]),ce=s.useCallback(e=>{const r=D.current;if(Y(e.x,e.y)){const t=Math.round(e.x),k=Math.round(e.y);e.x=t,e.y=k;const z=["up","down","left","right"],R=te(e.direction),h=z.filter(p=>p===R&&!e.isScared||p==="down"&&t===9&&k===7?!1:A(t,k,p,!0));if(h.length===0){A(t,k,R,!0)&&(e.direction=R);return}if(h.length===1)e.direction=h[0];else{let p,a;if(e.isScared){e.direction=h[Math.floor(Math.random()*h.length)];return}if(I.current%1200>1e3)p=e.scatterTarget.x,a=e.scatterTarget.y;else if(e.color==="#ff0000")p=r.x,a=r.y;else if(e.color==="#ffb8ff")p=r.x+(r.direction==="right"?4:r.direction==="left"?-4:0),a=r.y+(r.direction==="down"?4:r.direction==="up"?-4:0);else if(e.color==="#00ffff"){const d=P.current[0],m=r.x+(r.direction==="right"?2:r.direction==="left"?-2:0),b=r.y+(r.direction==="down"?2:r.direction==="up"?-2:0);p=m+(m-d.x),a=b+(b-d.y)}else Math.sqrt((t-r.x)**2+(k-r.y)**2)>8?(p=r.x,a=r.y):(p=e.scatterTarget.x,a=e.scatterTarget.y);let l=h[0],x=1/0;for(const d of h){let m=t,b=k;d==="up"?b--:d==="down"?b++:d==="left"?m--:d==="right"&&m++;const g=(m-p)**2+(b-a)**2;g<x&&(x=g,l=d)}e.direction=l}}const o=e.isScared?W*.5:W;let f=e.x,u=e.y;switch(e.direction){case"up":u-=o;break;case"down":u+=o;break;case"left":f-=o;break;case"right":f+=o;break}const M=e.direction==="left"?Math.floor(f):e.direction==="right"?Math.ceil(f):Math.round(f),y=e.direction==="up"?Math.floor(u):e.direction==="down"?Math.ceil(u):Math.round(u);T(M,y,!0)?(e.x=f,e.y=u):(e.x=Math.round(e.x),e.y=Math.round(e.y),e.direction=te(e.direction)),e.x<-.5&&(e.x=j-.5),e.x>=j&&(e.x=0)},[A,Y]),ie=s.useCallback(e=>{const r=W*3,o=9,f=9,u=o-e.x,M=f-e.y,y=Math.sqrt(u*u+M*M);y<.5?(e.x=o,e.y=f,e.mode="leaving",e.isScared=!1):(e.x+=u/y*r,e.y+=M/y*r)},[]),F=s.useCallback(()=>{var p;if(w!=="playing")return;I.current++;const e=D.current;if(Y(e.x,e.y)){const a=Math.round(e.x),c=Math.round(e.y);S.current!==e.direction&&A(a,c,S.current)&&(e.direction=S.current,e.x=a,e.y=c);const l=(p=v.current[c])==null?void 0:p[a];l===1?(v.current[c][a]=3,E.current+=10,C(E.current)):l===2&&(v.current[c][a]=3,E.current+=50,C(E.current),H.current=!0,P.current.forEach(x=>{x.mode==="active"&&(x.isScared=!0)}),L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{H.current=!1,P.current.forEach(x=>x.isScared=!1)},7e3))}const r=e.direction==="left"?e.x-_:e.direction==="right"?e.x+_:e.x,o=e.direction==="up"?e.y-_:e.direction==="down"?e.y+_:e.y,f=e.direction==="left"?Math.floor(r):e.direction==="right"?Math.ceil(r):Math.round(r),u=e.direction==="up"?Math.floor(o):e.direction==="down"?Math.ceil(o):Math.round(o);T(f,u)?(e.x=r,e.y=o,e.x<-.5&&(e.x=j-.5),e.x>=j&&(e.x=0)):(e.x=Math.round(e.x),e.y=Math.round(e.y)),P.current.forEach(a=>{switch(a.mode){case"inHouse":ae(a);break;case"leaving":ne(a);break;case"active":ce(a);break;case"eaten":ie(a);break}});for(const a of P.current){if(a.mode==="eaten"||a.mode==="inHouse")continue;const c=a.x-e.x,l=a.y-e.y;if(Math.sqrt(c*c+l*l)<.7){if(H.current&&a.isScared)a.mode="eaten",a.isScared=!1,E.current+=200,C(E.current);else if(!a.isScared&&a.mode==="active")if(X.current--,ee(X.current),X.current<=0){Z("gameover");return}else{re();return}}}let M=!1;e:for(let a=0;a<O;a++)for(let c=0;c<j;c++)if(v.current[a][c]===1||v.current[a][c]===2){M=!0;break e}if(!M){Z("won");return}const y=$.current,t=y==null?void 0:y.getContext("2d");if(!t||!y)return;t.fillStyle="#000011",t.fillRect(0,0,y.width,y.height);for(let a=0;a<O;a++)for(let c=0;c<j;c++){const l=v.current[a][c],x=c*i,d=a*i;if(l===0)t.fillStyle="#2244aa",t.fillRect(x+1,d+1,i-2,i-2),t.strokeStyle="#4488ff",t.lineWidth=1,t.strokeRect(x+1,d+1,i-2,i-2);else if(l===1)t.fillStyle="#ffcc00",t.beginPath(),t.arc(x+i/2,d+i/2,2,0,Math.PI*2),t.fill();else if(l===2){const m=Math.sin(Date.now()/150)*2+5;t.fillStyle="#ffcc00",t.beginPath(),t.arc(x+i/2,d+i/2,m,0,Math.PI*2),t.fill()}}t.fillStyle="#ffaaff",t.fillRect(8*i+2,8*i,i*3-4,3);const k=e.x*i+i/2,z=e.y*i+i/2;t.fillStyle="#ffff00",t.beginPath();const R=Math.abs(Math.sin(Date.now()/60))*.5+.1;let h=0;switch(e.direction){case"right":h=0;break;case"down":h=Math.PI/2;break;case"left":h=Math.PI;break;case"up":h=-Math.PI/2;break}t.arc(k,z,i/2-1,h+R,h+Math.PI*2-R),t.lineTo(k,z),t.closePath(),t.fill(),P.current.forEach(a=>{const c=a.x*i+i/2,l=a.y*i+i/2;if(a.mode==="eaten"){t.fillStyle="white",t.beginPath(),t.arc(c-3,l-1,3,0,Math.PI*2),t.arc(c+3,l-1,3,0,Math.PI*2),t.fill(),t.fillStyle="#0000aa",t.beginPath(),t.arc(c-3,l-1,1.5,0,Math.PI*2),t.arc(c+3,l-1,1.5,0,Math.PI*2),t.fill();return}let x=a.color;a.isScared&&((L.current?1:0)&&I.current%20<10?x="#ffffff":x="#2222ff"),t.fillStyle=x,t.beginPath(),t.arc(c,l-2,i/2-1,Math.PI,0),t.lineTo(c+i/2-1,l+i/2-3);const d=Math.sin(Date.now()/100)*2;for(let m=0;m<3;m++){const b=c+i/2-1-(m+1)*(i-2)/3;t.quadraticCurveTo(b+(i-2)/6,l+i/2-3+(m%2===0?d:-d),b,l+i/2-3)}if(t.closePath(),t.fill(),t.fillStyle="white",t.beginPath(),t.ellipse(c-3,l-2,3,4,0,0,Math.PI*2),t.ellipse(c+3,l-2,3,4,0,0,Math.PI*2),t.fill(),a.isScared)t.fillStyle="#ffff00",t.beginPath(),t.arc(c-2,l-2,1,0,Math.PI*2),t.arc(c+2,l-2,1,0,Math.PI*2),t.fill();else{const m=e.x-a.x,b=e.y-a.y,g=Math.atan2(b,m),q=1.5;t.fillStyle="#0000aa",t.beginPath(),t.arc(c-3+Math.cos(g)*q,l-2+Math.sin(g)*q,2,0,Math.PI*2),t.arc(c+3+Math.cos(g)*q,l-2+Math.sin(g)*q,2,0,Math.PI*2),t.fill()}}),G.current=requestAnimationFrame(F)},[w,T,A,Y,ae,ne,ce,ie,re]);return s.useEffect(()=>(w==="playing"&&(G.current=requestAnimationFrame(F)),()=>{G.current&&cancelAnimationFrame(G.current)}),[w,F]),s.useEffect(()=>{N>V&&(oe(N),localStorage.setItem("pacman-highscore",N.toString()))},[N,V]),s.useEffect(()=>{const e=r=>{if(w==="playing")switch(r.key){case"ArrowUp":case"w":case"W":r.preventDefault(),S.current="up";break;case"ArrowDown":case"s":case"S":r.preventDefault(),S.current="down";break;case"ArrowLeft":case"a":case"A":r.preventDefault(),S.current="left";break;case"ArrowRight":case"d":case"D":r.preventDefault(),S.current="right";break}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[w]),n.jsxs("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center p-4",children:[n.jsxs("div",{className:"mb-6 text-center",children:[n.jsx("h1",{className:"text-4xl md:text-6xl font-display font-bold text-gradient mb-2 animate-pulse",children:"ðŸ•¹ï¸ PAC-MAN ðŸ•¹ï¸"}),n.jsx("p",{className:"text-muted-foreground text-sm",children:"Ein geheimes Easter Egg von LSE Studio"})]}),n.jsxs("div",{className:"flex gap-6 mb-4 text-lg font-bold flex-wrap justify-center",children:[n.jsxs("div",{className:"flex items-center gap-2 glass-badge px-4 py-2 rounded-full",children:[n.jsx(se,{className:"text-yellow-500",size:20}),n.jsxs("span",{children:["Score: ",N]})]}),n.jsxs("div",{className:"flex items-center gap-2 glass-badge px-4 py-2 rounded-full",children:[n.jsx(se,{className:"text-primary",size:20}),n.jsxs("span",{children:["High: ",V]})]}),n.jsx("div",{className:"flex items-center gap-2 glass-badge px-4 py-2 rounded-full",children:[...Array(le)].map((e,r)=>n.jsx(ue,{className:"text-red-500 fill-red-500",size:18},r))})]}),n.jsxs("div",{className:"relative glass-card-strong p-4 rounded-2xl",children:[n.jsx("canvas",{ref:$,width:j*i,height:O*i,className:"rounded-lg"}),w==="idle"&&n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 rounded-lg m-4",children:[n.jsx(me,{className:"text-primary w-16 h-16 mb-4 animate-bounce"}),n.jsx("p",{className:"text-white text-lg mb-4",children:"Bereit zum Spielen?"}),n.jsx(K,{variant:"hero",onClick:B,children:"Spiel starten"}),n.jsx("p",{className:"text-muted-foreground text-sm mt-4",children:"Steuerung: Pfeiltasten oder WASD"})]}),w==="gameover"&&n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 rounded-lg m-4",children:[n.jsx("h2",{className:"text-red-500 text-4xl font-bold mb-4 animate-pulse",children:"GAME OVER"}),n.jsxs("p",{className:"text-white text-xl mb-2",children:["Punktzahl: ",N]}),n.jsx(K,{variant:"hero",onClick:B,className:"mt-4",children:"Nochmal spielen"})]}),w==="won"&&n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 rounded-lg m-4",children:[n.jsx("h2",{className:"text-yellow-400 text-4xl font-bold mb-4 animate-pulse",children:"ðŸŽ‰ GEWONNEN! ðŸŽ‰"}),n.jsxs("p",{className:"text-white text-xl mb-2",children:["Punktzahl: ",N]}),n.jsx(K,{variant:"hero",onClick:B,className:"mt-4",children:"Nochmal spielen"})]})]}),n.jsxs(fe,{to:"/",className:"mt-8 flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors",children:[n.jsx(xe,{size:18}),n.jsx("span",{children:"ZurÃ¼ck zur Website"})]}),n.jsxs("div",{className:"mt-6 text-center text-muted-foreground text-sm max-w-md",children:[n.jsx("p",{children:"ðŸŸ¡ Sammle alle Punkte â€¢ ðŸ’— Power-Pellets machen Geister essbar"}),n.jsx("p",{className:"mt-1",children:"Psst... niemand muss wissen, dass du diese Seite gefunden hast! ðŸ¤«"})]})]})};export{Me as default};
